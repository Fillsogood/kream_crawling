<!DOCTYPE html>
<html lang="ko">
<head>
    <title>Admin Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
  </head>
<body>
    <div class="container mb-3">
        <h3 class="mt-5 mb-3" id="hh">신규 등록 상품</h3>
        <!--조회,삭제,input셀렉트 폼-->
        <form class="row row-cols-lg-auto g-3 align-items-center">      
            <div class="col-12">
              <label class="visually-hidden" for="inlineFormSelectPref">Preference</label>
              <select class="form-select" id="inlineFormSelectPref">
                <!-- 카테고리 셀렉트 코드를 넣어주세요-->
                <option selected>카테고리</option>
                <option value="상의">상의</option>
                <option value="하의">하의</option>
                <option value="신발">신발</option>
                <option value="패션잡화">패션잡화</option>
              </select>
            </div>
            <div class="btn-group me-2" role="group" aria-label="Second group">
              <button id="btn_a" type="button" class="btn btn-secondary active">남/여</button>
              <button id="btn_b" type="button" class="btn btn-secondary">남</button>
              <button id="btn_c" type="button" class="btn btn-secondary">여</button>
            </div>
            <div class="col-3">
              <input id="input_text" class="form-control" type="text" placeholder="제품을 입력해주세요" aria-label="default input example">
              </div>
              <div class="col-auto">
                <button id="search_btn" type="button" class="btn btn-dark btn-sm">조회</button>
              </div>
              <div class="col-auto ms-auto">
                <!--추후 기능 추가할 폼-->
              </div>    
          </form>
          <!--카테고리 테이블-->
        <table class="table table-sm">
            <thead>
                <!-- 열의 속성값을 나타내는 코드를 작성 (예 : 카테고리, 브랜드, 상품명, 가격) -->
                <tr>
                    <th>카테고리</th>
                    <th>브랜드</th>
                    <th>상품명</th>
                    <th>가격</th>
                    <th><button id="delete_btn" type="button" class="btn btn-dark btn-sm position-relative">삭제</button>
                        <button id="total_search_btn" type="button" class="btn btn-dark btn-sm position-relative">전체선택</button>
                    </th>  
                </tr>
            </thead>
            <tbody id="data-table">
            </tbody>
        </table>
        <!--깃허브 이미지 링크-->
        <a id="git_img" href="https://github.com/Fillsogood">
          <svg id="git_img" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
          </svg>Fillsogood
        </a>
        <p id="p_update">마지막 업데이트</p>
    </div> 
    <!--페이지네이션-->
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item disabled">
            <a class="page-link">Previous</a>
          </li>
          <li class="page-item"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>
      

   <script>
      // 크롤링한 데이터를 아래와 같은 형태의 객체 배열로 가정합니다.
      // 추후 데이터베이스에 있는 데이터를 쿼리문으로 불러 올 수 있게 쿼리르 작성해 볼 수 있음
      let today = new Date()
      let year = today.getFullYear()
      let month =today.getMonth() +1
      let date = today.getDate()
      
      //오늘 날짜 갱신
      const h3 = document.getElementById('hh')
      h3.textContent = `신규 등록 상품(${year}-${month}-${date})`

      //마지막 업데이트
      const p_update = document.getElementById('p_update')
      p_update.textContent=`마지막 업데이트 ${year}-${month}-${date}`
    // Crawling 기능 넣기전 임시로 데이터값 보여주는 코드
      const data = [
          { category: "상의", brand: 'Supreme', product: '슈프림 박스로고 후드티', price: '390,000' },
          { category: "하의", brand: 'DIESEL', product: '디젤 트랙 팬츠', price: '188,000' },
          { category: "신발", brand: 'Nike', product: '에어포스 1', price: '137,000' },
          { category: "패션잡화", brand: 'Music&Goods', product: '빵빵이 키링', price: '29,000' },
          // ...
      ];
      
      const dataTable = document.getElementById('data-table');
      
    // dataTable에 들어있는 값을 foreach문으로 돌려서 하나씩 Row 테이블로 아이템 넣음 그리고 각 테이블 마다 cell 추가해서 checkbox 넣고 추후에 체크하면 삭제 까지 만들 예정.
      data.forEach((item) => {
        const row = dataTable.insertRow();
        row.className ='tr'
        row.insertCell(0).innerHTML = item.category;
        row.insertCell(1).innerHTML = item.brand;
        row.insertCell(2).innerHTML = item.product;
        row.insertCell(3).innerHTML = item.price;

        const cell  =row.insertCell(4)
        const checkbox = document.createElement('input')
        checkbox.type='checkbox'
        checkbox.className= 'chk'
        cell.appendChild(checkbox)
      });
      
      //남/여,남,여 active 클릭시 활성화
      const btn_a = document.getElementById('btn_a')
      const btn_b = document.getElementById('btn_b')
      const btn_c = document.getElementById('btn_c')

      //전체선택btn
      const total_search =document.getElementById('total_search_btn')
      
      //남/여btn
      btn_a.addEventListener("click",()=>{
        btn_a.className = "btn btn-secondary active"
        btn_b.className = "btn btn-secondary"
        btn_c.className = "btn btn-secondary"
      })
      //남btn
      btn_b.addEventListener("click",()=>{
        btn_a.className = "btn btn-secondary"
        btn_b.className = "btn btn-secondary active"
        btn_c.className = "btn btn-secondary"
      })
      //여btn
      btn_c.addEventListener("click",()=>{
        btn_a.className = "btn btn-secondary"
        btn_b.className = "btn btn-secondary"
        btn_c.className = "btn btn-secondary active"
      })

      //전체선택/전체해제
      const chk = document.querySelectorAll('.chk')
      total_search.addEventListener('click',()=>{
          //체크박스id
          
          if(total_search.textContent=="전체선택")
          {
            for(let i = 0;i<chk.length;i++)
            {
                chk[i].checked = true
            }
            total_search.textContent="전체해제"
          }
          else if(total_search.textContent=="전체해제")
          {
            for(let i = 0;i<chk.length;i++)
            {
                chk[i].checked = false
            }
            total_search.textContent="전체선택"
          }
      })
     //삭제 기능
      const delete_btn = document.getElementById('delete_btn')
      
      const tr =document.querySelectorAll(".tr")

      delete_btn.addEventListener("click",()=>{
        const chk_ = document.querySelectorAll('input.chk:checked');//input타입 체크박스의 체크값이 true인 값만
        
        for(let i =0;i<chk_.length;i++){
            chk_[i].closest('tr').remove() //closest 가까운 부모 찾는 함수
        }

      })
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html>